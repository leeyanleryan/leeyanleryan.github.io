
<div class="lt-toggle-buttons-jp no-double-tap-zoom">
  <div id="lt-toggle-kanji" class="lt-toggle-button">Toggle Kanji</div>
  <div id="lt-toggle-romaji" class="lt-toggle-button">Toggle Romaji</div>
  <div id="lt-toggle-english" class="lt-toggle-button">Toggle English</div>
</div>
<div class="lyrics-translations">
  {% for line in page.lyrics %}
    {% if line.divider %}
      <h5 class="h5-margin-0">-----------------------------------<br></h5>
    {% else %}
      {% assign idx = forloop.index0 %}
      <div class="lyrics-stanza no-double-tap-zoom no-hover-background-after-click" data-idx="{{ idx }}">
        {% if line.lang == "jp" %}
          <h5 class="h5-margin-0">
          <span class="lt-kanji-text">{{ line.kanji }}<br></span>
          <span class="lt-romaji-text"><em>{{ line.romaji }}</em><br></span>
          <span class="lt-english-text">{{ line.english }}<br></span>
          </h5>
        {% endif %}
        {% if line.lang == "en" %}
          <h5 class="h5-margin-0">
          <span class="lt-english-text-only">{{ line.english }}<br></span>
          </h5>
        {% endif %}
      </div>
      <div class="w3-row lyrics-explanation" id="exp-{{ idx }}">
        {% if line.lang == "jp" %}
          <h6 class="w3-col s4 m4 h6-margin-0">Text</h6>
          <h6 class="w3-col s4 m4 h6-margin-0">Romaji</h6> 
          <h6 class="w3-col s4 m4 h6-margin-0">English</h6>
          <hr class="hr-lyrics-explanation">
          {% for item in line.explanation %}
            {% assign entry = site.data.word-bank-jp[item.text] %}
            {% if entry.senses %}
              {% assign sense_key = item.sense %}
              {% if sense_key == nil %}
                {% for pair in entry.senses %}
                  {% assign sense_key = pair[0] %}
                  {% break %}
                {% endfor %}
              {% endif %}
              {% assign definition = entry.senses[sense_key] %}
              {% assign gloss      = definition.english %}
            {% else %}
              {% assign gloss = entry.english %}
            {% endif %}
            <h6 class="w3-col s4 m4 h6-margin-0">
              {%- if entry.kanji != "" -%}{{ entry.kanji }}
              {%- elsif entry.katakana != "" -%}{{ entry.katakana }}
              {%- else -%}-{%- endif -%}
            </h6>
            <h6 class="w3-col s4 m4 h6-margin-0"><em>
              {%- if entry.romaji != "" -%}{{ entry.romaji }}
              {%- else -%}-{%- endif -%}</em></h6>
            <h6 class="w3-col s4 m4 h6-margin-0">
              {%- if gloss != "" -%}{{ gloss }}
              {%- else -%}-{%- endif -%}</h6>
          {% endfor %}
        {% endif %}
      </div>
    {% endif %}
  {% endfor %}
</div>